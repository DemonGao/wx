<!DOCTYPE html>
<html>

	<head>
		<title>编辑个人信息</title>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

		<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">
		<link rel="stylesheet" href="../static/JqueryWeUI/lib/weui.min.css">
		<link rel="stylesheet" href="../static/JqueryWeUI/css/jquery-weui.css">

		<link rel="stylesheet" href="../static/css/style.css" />
		<style>
			.weui_label {
				width: 70px;
			}
			
			html {
				font-size: 20px;
			}
		</style>
	</head>

	<body>
		<div class="weui_cells weui_cells_form nomargin">
			<form id="upform" action="http://maquanjun.tunnel.2bdata.com/Weixin/servlet/student_insert" method="post" enctype="multipart/form-data">
				
			<input type="hidden" name="user_id" value="1" />
			<div class="weui_cell">
				<div class="weui_cell_hd margin-r-15"><label class="weui_label">姓名</label></div>
				<div class="weui_cell_bd weui_cell_primary">
					<input class="weui_input" type="text" name="xingming" placeholder="请输入您真实姓名">
				</div>
			</div>
			<div class="weui_cell">
				<div class="weui_cell_hd margin-r-15"><label for="date" class="weui_label">性别</label></div>
				<div class="weui_cell_bd weui_cell_primary ">
					<input class="weui_input" id="sex" type="text" name="xingbie" value="" readonly="">
				</div>
			</div>
			<div class="weui_cell">
				<div class="weui_cell_hd margin-r-15"><label for="name" class="weui_label">现居地</label></div>
				<div class="weui_cell_bd weui_cell_primary">
					<input class="weui_input" id="place" type="text" name="xianjud" value="山东省 烟台市 芝罘区" readonly="" data-code="340102" data-codes="340000,340100,340102">
				</div>
			</div>
			<div class="weui_cell">
				<div class="weui_cell_hd margin-r-15"><label for="date" class="weui_label">状态</label></div>
				<div class="weui_cell_bd weui_cell_primary">
					<input class="weui_input" id="qiuzhi" type="text" name="zhuangtai" value="" readonly="">
				</div>
			</div>
			<div class="weui_cell">
				<div class="weui_cell_hd margin-r-15"><label for="date" class="weui_label">出生日期</label></div>
				<div class="weui_cell_bd weui_cell_primary">
					<input class="weui_input" id="date" type="text" name="chushengrq" readonly="">
				</div>
			</div>
			<div class="weui_cell">
				<div class="weui_cell_bd weui_cell_primary">
					<div class="weui_uploader">
						<div class="weui_uploader_hd weui_cell">
							<div class="weui_cell_bd weui_cell_primary">上传头像</div>
							<div class="weui_cell_ft">0/1</div>
						</div>
						<div class="weui_uploader_bd">
							<ul class="weui_uploader_files" id="localImag" style="display: none;">
								<li class="weui_uploader_file"><img id="preview" /></li>
								<!--<li class="weui_uploader_file" style="background-image:url(http://shp.qpic.cn/weixinsrc_pic/pScBR7sbqjOBJomcuvVJ6iacVrbMJaoJZkFUIq4nzQZUIqzTKziam7ibg/)"></li>
								<li class="weui_uploader_file" style="background-image:url(http://shp.qpic.cn/weixinsrc_pic/pScBR7sbqjOBJomcuvVJ6iacVrbMJaoJZkFUIq4nzQZUIqzTKziam7ibg/)"></li>
								<li class="weui_uploader_file weui_uploader_status" style="background-image:url(http://shp.qpic.cn/weixinsrc_pic/pScBR7sbqjOBJomcuvVJ6iacVrbMJaoJZkFUIq4nzQZUIqzTKziam7ibg/)">
									<div class="weui_uploader_status_content">
										<i class="weui_icon_warn"></i>
									</div>
								</li>
								<li class="weui_uploader_file weui_uploader_status" style="background-image:url(http://shp.qpic.cn/weixinsrc_pic/pScBR7sbqjOBJomcuvVJ6iacVrbMJaoJZkFUIq4nzQZUIqzTKziam7ibg/)">
									<div class="weui_uploader_status_content">50%</div>
								</li>-->
							</ul>
							<div class="weui_uploader_input_wrp">
								<input class="weui_uploader_input" type="file" name="fileselect[]" onchange="javascript:setImagePreview(this);">
							</div>
						</div>
					</div>
				</div>
			</div>
			<a href="javascript:;" class="weui_btn weui_btn_primary margin-l-10 margin-r-10" onclick="javascript:commitForm();">保存</a>
			</form>
		</div>
		<script src="../static/JqueryWeUI/lib/jquery-2.1.4.js"></script>
		<script src="../static/JqueryWeUI/lib/fastclick.js"></script>
		<script>
			$(function() {
				FastClick.attach(document.body);
			});
		</script>
		<script src="../static/JqueryWeUI/js/jquery-weui.js"></script>
		<script src="../static/JqueryWeUI/js/city-picker.js"></script>
		<script>
			function commitForm(){
				$("#upform").submit();
			}
			//下面用于图片上传预览功能
			function setImagePreview(docObj) {
				//				var docObj = document.getElementById("doc");

				var imgObjPreview = document.getElementById("preview");

				if(docObj.files && docObj.files[0]) {
					//火狐下，直接设img属性
					imgObjPreview.style.display = 'block';
					imgObjPreview.style.width = '79px';
					imgObjPreview.style.height = '79px';
					//imgObjPreview.src = docObj.files[0].getAsDataURL();

					//火狐7以上版本不能用上面的getAsDataURL()方式获取，需要一下方式
					imgObjPreview.src = window.URL.createObjectURL(docObj.files[0]);
				} else {
					//IE下，使用滤镜
					docObj.select();
					var imgSrc = document.selection.createRange().text;
					var localImagId = document.getElementById("localImag");
					//必须设置初始大小
					localImagId.style.width = "150px";
					localImagId.style.height = "180px";
					//图片异常的捕捉，防止用户修改后缀来伪造图片
					try {
						localImagId.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)";
						localImagId.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = imgSrc;
					} catch(e) {
						alert("您上传的图片格式不正确，请重新选择!");
						return false;
					}
					imgObjPreview.style.display = 'none';
					document.selection.empty();
				}
				$("#localImag").css("display", "block");
				//				$(".weui_uploader_input_wrp").css("display","none");
				$(".weui_uploader .weui_cell_ft").text('1/1');
				return true;
			}

			//现居地
			$("#place").cityPicker({
				title: "选择现居地",
				onChange: function(picker, values, displayValues) {
					console.log(values, displayValues);
				}
			});
			//出生日期
			$("#date").calendar({
				onChange: function(p, values, displayValues) {
					console.log(values, displayValues);
				}
			});

			$("#sex").picker({
				title: "请选择您的性别",
				cols: [{
					textAlign: 'center',
					values: ['男', '女']
				}],
				onChange: function(p, v, dv) {
					console.log(p, v, dv);
				},
				onClose: function(p, v, d) {
					console.log("close");
				}
			});

			$("#qiuzhi").picker({
				title: "请选择您的性别",
				cols: [{
					textAlign: 'center',
					values: ['在校学生', '正在找个工作,快速到岗', '在职,正在考虑换个工作']
				}],
				onChange: function(p, v, dv) {
					console.log(p, v, dv);
				},
				onClose: function(p, v, d) {
					console.log("close");
				}
			});
		</script>
		<script>
		</script>
	</body>

</html>